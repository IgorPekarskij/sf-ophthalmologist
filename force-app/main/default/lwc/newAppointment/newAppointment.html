<!--
  - Created by Igor Pekarskij on 19.06.2023.
 -->

<!-- New Appointment -->
<template>
    <div class="main">
        <div class="slds-header">
            <div class="slds-page-header header">
                <div class="header" >
                    <div class="slds-media__figure">
                          <span class="slds-icon_container">
                            <img src={labels.DocLogo} class="logo" alt={labels.logoTitle} title={labels.logoTitle}/>
                          </span>
                    </div>
                    <div class="min-width_button-item">
                        <lightning-button-group>
                            <lightning-button
                                    variant="brand"
                                    label={labels.newAppointmentButtonLabel}
                                    onclick={handleNewAppointment}
                            ></lightning-button>
                            <lightning-button
                                    label={labels.printButtonLabel}
                                    onclick={openPreviewTab}
                            ></lightning-button>
                        </lightning-button-group>
                    </div>
                </div>
            </div>
        </div>
        <div class="slds-card">
            <lightning-tabset variant="scoped" active-tab-value={currentTab}>
                <lightning-tab
                        icon-name="standard:contact"
                        title={labels.patientTitle}
                        value="patient"
                        label={labels.patientTitle}
                        onactive={handleActiveTab}
                >
                    <lightning-layout horizontal-align="" vertical-align="center" multiple-rows="true">
                        <lightning-layout-item size="6" padding="horizontal-small">
                            <lightning-input
                                    data-id="patient_name__c"
                                    class="required-field"
                                    label={labels.patientFIO}
                                    value={patient.patient_name__c}
                                    onchange={handlePatientDataChange}
                                    required
                            ></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" padding="horizontal-small">
                            <lightning-input
                                    data-id="patient_birthdate__c"
                                    class="required-field"
                                    type="date"
                                    date-style="long"
                                    label={labels.birthdateTitle}
                                    value={patient.patient_birthdate__c}
                                    onchange={handlePatientDataChange}
                                    required
                            ></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" padding="horizontal-small">
                            <lightning-input
                                    data-id="patient_address__c"
                                    label={labels.addressTitle}
                                    value={patient.patient_address__c}
                                    onchange={handlePatientDataChange}
                            ></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" padding="horizontal-small">
                            <lightning-input
                                    data-id="patient_phone__c"
                                    type="phone"
                                    label={labels.mobileTitle}
                                    value={patient.patient_phone__c}
                                    onchange={handlePatientDataChange}
                            ></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-tab>
                <lightning-tab
                        icon-name="standard:contact_list"
                        title={labels.complaintsTitle}
                        value="complaints"
                        label={labels.complaintsTitle}
                        onactive={handleActiveTab}
                >
                    <c-complaints-component-l-w-c data-id="complaintsComponent" ></c-complaints-component-l-w-c>
                </lightning-tab>
                <lightning-tab
                        icon-name="standard:contact_list"
                        title={labels.objectiveStatusTitle}
                        value="status"
                        label={labels.objectiveStatusTitle}
                        onactive={handleActiveTab}
                >
                    <c-objective-investigation-l-w-c data-id="objectiveInvestigation"></c-objective-investigation-l-w-c>
                </lightning-tab>
                <lightning-tab
                        icon-name="standard:contact_list"
                        title={labels.eyegroundTitle}
                        value="eyeGround"
                        label={labels.eyegroundTitle}
                        onactive={handleActiveTab}
                >
                    <c-eye-ground-investigation-l-w-c data-id="eyeGroundInvestigation"></c-eye-ground-investigation-l-w-c>
                </lightning-tab>
                <lightning-tab
                        icon-name="standard:contact_list"
                        title={labels.diagnosisTitle}
                        value="diagnosis"
                        label={labels.diagnosisTitle}
                        onactive={handleActiveTab}
                >
                    <c-multiselect-component-l-w-c
                            data-id="diagnosisComponent"
                            label={labels.diagnosisTitle}
                            sobject-name="Diagnosis__c"
                    ></c-multiselect-component-l-w-c>
                </lightning-tab>
                <lightning-tab
                        icon-name="standard:contact_list"
                        title={labels.recommendationsTitle}
                        value="recommendations"
                        label={labels.recommendationsTitle}
                        onactive={handleActiveTab}
                >
                    <c-multiselect-component-l-w-c
                            data-id="recommendationsComponent"
                            label={labels.recommendationsTitle}
                            sobject-name="Recommendation__c"
                    ></c-multiselect-component-l-w-c>
                </lightning-tab>
            </lightning-tabset>
        </div>
        <template if:true={showPreviewModal}>
            <c-preview-modal-window
                    input-dat={appointmentObjectForPrint}
                    onprint={handlePrintDocument}
                    onclosemodal={hidePreviewModal}
            ></c-preview-modal-window>
        </template>
    </div>
</template>